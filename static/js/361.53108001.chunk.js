"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[361],{361:(e,t,s)=>{s.r(t),s.d(t,{default:()=>r});var a=s(665);const n=[{id:1,userId:1,userName:"\u0410\u043d\u043d\u0430",userPhoto:"https://images.unsplash.com/photo-1494790108377-be9c29b29330?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",lastActive:new Date,isOnline:!0,messages:[{id:"1",senderId:1,type:"text",content:"\u041f\u0440\u0438\u0432\u0435\u0442! \u041a\u0430\u043a \u0434\u0435\u043b\u0430?",timestamp:new Date(Date.now()-36e5),isDeleted:!1},{id:"2",senderId:0,type:"text",content:"\u041f\u0440\u0438\u0432\u0435\u0442! \u0412\u0441\u0435 \u043e\u0442\u043b\u0438\u0447\u043d\u043e, \u0441\u043f\u0430\u0441\u0438\u0431\u043e! \u041a\u0430\u043a \u0442\u0432\u043e\u0438 \u0434\u0435\u043b\u0430?",timestamp:new Date(Date.now()-35e5),isDeleted:!1},{id:"3",senderId:1,type:"image",content:"https://images.unsplash.com/photo-1513379733131-48b424e4c267?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",timestamp:new Date(Date.now()-34e5),isDeleted:!1},{id:"4",senderId:0,type:"text",content:"\u0412\u0430\u0443, \u043e\u0442\u043b\u0438\u0447\u043d\u043e\u0435 \u0444\u043e\u0442\u043e! \u0413\u0434\u0435 \u044d\u0442\u043e \u0441\u043d\u044f\u0442\u043e?",timestamp:new Date(Date.now()-33e5),isDeleted:!1}]},{id:2,userId:2,userName:"\u041c\u0430\u0440\u0438\u044f",userPhoto:"https://images.unsplash.com/photo-1524638431109-93d95c968f03?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",lastActive:new Date(Date.now()-18e5),isOnline:!1,messages:[{id:"5",senderId:2,type:"image",content:"https://images.unsplash.com/photo-1526080652727-5b77f74eacd2?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",timestamp:new Date(Date.now()-72e5),isDeleted:!1},{id:"6",senderId:0,type:"text",content:"\u041e\u0447\u0435\u043d\u044c \u043a\u0440\u0430\u0441\u0438\u0432\u043e! \u0422\u044b \u043f\u0440\u043e\u0444\u0435\u0441\u0441\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0439 \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444?",timestamp:new Date(Date.now()-71e5),isDeleted:!1}]},{id:3,userId:3,userName:"\u0421\u043e\u0444\u0438\u044f",userPhoto:"https://images.unsplash.com/photo-1517841905240-472988babdf9?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",lastActive:new Date,isOnline:!0,messages:[{id:"7",senderId:3,type:"text",content:"\u041f\u0440\u0438\u0432\u0435\u0442! \u0412\u0438\u0434\u0435\u043b \u0442\u0432\u043e\u0439 \u043d\u043e\u0432\u044b\u0439 \u043f\u0440\u043e\u0435\u043a\u0442, \u043e\u0447\u0435\u043d\u044c \u0432\u043f\u0435\u0447\u0430\u0442\u043b\u044f\u0435\u0442! \ud83d\udc4f",timestamp:new Date(Date.now()-864e5),isDeleted:!1},{id:"8",senderId:0,type:"text",content:"\u0421\u043f\u0430\u0441\u0438\u0431\u043e \u0431\u043e\u043b\u044c\u0448\u043e\u0435! \u042f \u043e\u0447\u0435\u043d\u044c \u0441\u0442\u0430\u0440\u0430\u043b\u0441\u044f \u043d\u0430\u0434 \u043d\u0438\u043c \ud83d\ude0a",timestamp:new Date(Date.now()-863e5),isDeleted:!1}]},{id:4,userId:4,userName:"\u0415\u043a\u0430\u0442\u0435\u0440\u0438\u043d\u0430",userPhoto:"https://images.unsplash.com/photo-1488716820095-cbe80883c496?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",lastActive:new Date(Date.now()-36e5),isOnline:!1,messages:[{id:"9",senderId:4,type:"text",content:"\u0413\u043e\u0442\u043e\u0432\u0430 \u043a \u0437\u0430\u0432\u0442\u0440\u0430\u0448\u043d\u0435\u0439 \u0432\u0441\u0442\u0440\u0435\u0447\u0435?",timestamp:new Date(Date.now()-1728e5),isDeleted:!1},{id:"10",senderId:0,type:"text",content:"\u0414\u0430, \u0443\u0436\u0435 \u043f\u043e\u0434\u0433\u043e\u0442\u043e\u0432\u0438\u043b\u0430 \u0432\u0441\u0435 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b!",timestamp:new Date(Date.now()-1727e5),isDeleted:!1}]},{id:5,userId:5,userName:"\u0410\u043b\u0438\u0441\u0430",userPhoto:"https://images.unsplash.com/photo-1534528741775-53994a69daeb?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",lastActive:new Date,isOnline:!0,messages:[{id:"11",senderId:5,type:"voice",content:"/audio/voice1.webm",timestamp:new Date(Date.now()-2592e5),isDeleted:!1},{id:"12",senderId:0,type:"text",content:"\u0418\u0437\u0432\u0438\u043d\u0438, \u0441\u0435\u0439\u0447\u0430\u0441 \u043d\u0435 \u043c\u043e\u0433\u0443 \u043f\u0440\u043e\u0441\u043b\u0443\u0448\u0430\u0442\u044c, \u043f\u0435\u0440\u0435\u0437\u0432\u043e\u043d\u044e \u043f\u043e\u0437\u0436\u0435!",timestamp:new Date(Date.now()-2591e5),isDeleted:!1}]},{id:6,userId:6,userName:"\u0412\u0438\u043a\u0442\u043e\u0440\u0438\u044f",userPhoto:"https://images.unsplash.com/photo-1524504388940-b1c1722653e1?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",lastActive:new Date(Date.now()-72e5),isOnline:!1,messages:[{id:"13",senderId:6,type:"video",content:"/video/video1.webm",timestamp:new Date(Date.now()-3456e5),isDeleted:!1},{id:"14",senderId:0,type:"text",content:"\u041a\u043b\u0430\u0441\u0441\u043d\u043e\u0435 \u0432\u0438\u0434\u0435\u043e! \u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u044e \u043f\u043e\u043b\u043d\u043e\u0441\u0442\u044c\u044e \u0432\u0435\u0447\u0435\u0440\u043e\u043c",timestamp:new Date(Date.now()-3455e5),isDeleted:!1}]},{id:7,userId:7,userName:"\u041f\u043e\u043b\u0438\u043d\u0430",userPhoto:"https://images.unsplash.com/photo-1529626455594-4ff0802cfb7e?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",lastActive:new Date(Date.now()-144e5),isOnline:!1,messages:[{id:"15",senderId:7,type:"sticker",content:"/stickers/sticker1.png",timestamp:new Date(Date.now()-432e6),isDeleted:!1},{id:"16",senderId:0,type:"sticker",content:"/stickers/sticker2.png",timestamp:new Date(Date.now()-4319e5),isDeleted:!1}]}],i=["\ud83d\ude0a","\ud83d\ude02","\u2764\ufe0f","\ud83d\ude0d","\ud83d\udc4d","\ud83c\udf89","\ud83c\udf1f","\ud83d\udc95","\ud83e\udd14","\ud83d\ude0e","\ud83d\ude0c","\ud83e\udd70","\ud83d\ude07","\ud83e\udd17","\ud83d\ude0b","\ud83d\ude09","\ud83d\ude4c","\u2728","\ud83d\udd25","\ud83d\udcaa"],c=["/stickers/sticker1.png","/stickers/sticker2.png","/stickers/sticker3.png","/stickers/sticker4.png","/stickers/sticker5.png","/stickers/sticker6.png","/stickers/sticker7.png","/stickers/sticker8.png","/stickers/sticker9.png","/stickers/sticker10.png"],r=()=>{const[e,t]=(0,a.useState)(n),[s,r]=(0,a.useState)(null),[o,m]=(0,a.useState)(""),[d,l]=(0,a.useState)(!1),[p,u]=(0,a.useState)(!1),[g,w]=(0,a.useState)(!1),[D,h]=(0,a.useState)(null),[v,b]=(0,a.useState)(!1),k=(0,a.useRef)(null),E=(0,a.useRef)([]),f=(0,a.useRef)(null);(0,a.useEffect)((()=>{f.current?.scrollIntoView({behavior:"smooth"})}),[s?.messages]);const N=async e=>{try{const t=await navigator.mediaDevices.getUserMedia({audio:!0,video:"video"===e});h(t);const a=new MediaRecorder(t);k.current=a,E.current=[],a.ondataavailable=e=>{e.data.size>0&&E.current.push(e.data)},a.onstop=()=>{const t=new Blob(E.current,{type:"video"===e?"video/webm":"audio/webm"}),a=URL.createObjectURL(t);if(s){const t={id:Date.now().toString(),senderId:0,type:"video"===e?"video":"voice",content:a,timestamp:new Date,isDeleted:!1};y(s.id,t)}},a.start(),l(!0)}catch(t){console.error("Error accessing media devices:",t)}},y=(e,s)=>{t((t=>t.map((t=>t.id===e?{...t,messages:[...t.messages,s]}:t))))},I=()=>{if(!o.trim()||!s)return;const e={id:Date.now().toString(),senderId:0,type:"text",content:o.trim(),timestamp:new Date,isDeleted:!1};y(s.id,e),m("")};return a.createElement("div",{className:"chat-screen"},a.createElement("div",{className:"chat-list"},e.map((e=>a.createElement("div",{key:e.id,className:"chat-item "+(s?.id===e.id?"active":""),onClick:()=>r(e)},a.createElement("div",{className:"chat-item-photo"},a.createElement("img",{src:e.userPhoto,alt:e.userName}),e.isOnline&&a.createElement("div",{className:"online-indicator"})),a.createElement("div",{className:"chat-item-info"},a.createElement("div",{className:"chat-item-name"},e.userName),a.createElement("div",{className:"chat-item-last-message"},e.messages[e.messages.length-1]?.content)),a.createElement("button",{className:"delete-chat-button",onClick:a=>{var n;a.stopPropagation(),n=e.id,t((e=>e.filter((e=>e.id!==n)))),s?.id===n&&r(null)}},"\ud83d\uddd1\ufe0f"))))),s?a.createElement("div",{className:"chat-content"},a.createElement("div",{className:"chat-header"},a.createElement("img",{src:s.userPhoto,alt:s.userName}),a.createElement("div",{className:"chat-header-info"},a.createElement("div",{className:"chat-header-name"},s.userName),a.createElement("div",{className:"chat-header-status"},s.isOnline?"\u0412 \u0441\u0435\u0442\u0438":"\u0411\u044b\u043b(\u0430) \u0432 \u0441\u0435\u0442\u0438 "+new Date(s.lastActive).toLocaleTimeString()))),a.createElement("div",{className:"messages-container"},s.messages.map((e=>a.createElement("div",{key:e.id,className:"message "+(0===e.senderId?"sent":"received")},(e=>{if(e.isDeleted)return a.createElement("div",{className:"deleted-message"},"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0443\u0434\u0430\u043b\u0435\u043d\u043e");switch(e.type){case"text":return a.createElement("div",{className:"message-text"},e.content);case"voice":return a.createElement("audio",{controls:!0,className:"voice-message"},a.createElement("source",{src:e.content,type:"audio/webm"}));case"video":return a.createElement("video",{controls:!0,className:"video-message"},a.createElement("source",{src:e.content,type:"video/webm"}));case"image":return a.createElement("img",{src:e.content,alt:"\u0424\u043e\u0442\u043e",className:"image-message"});case"sticker":return a.createElement("img",{src:e.content,alt:"\u0421\u0442\u0438\u043a\u0435\u0440",className:"sticker-message"});default:return null}})(e),a.createElement("div",{className:"message-time"},new Date(e.timestamp).toLocaleTimeString()),0===e.senderId&&!e.isDeleted&&a.createElement("button",{className:"delete-message-button",onClick:()=>{return a=s.id,n=e.id,void t((e=>e.map((e=>e.id===a?{...e,messages:e.messages.map((e=>e.id===n?{...e,isDeleted:!0}:e))}:e))));var a,n}},"\ud83d\uddd1\ufe0f")))),a.createElement("div",{ref:f})),a.createElement("div",{className:"chat-input"},a.createElement("div",{className:"input-buttons"},a.createElement("button",{onClick:()=>u(!p)},"\ud83d\ude0a"),a.createElement("button",{onClick:()=>w(!g)},"\ud83c\udfaf"),a.createElement("button",{onClick:()=>N("audio")},"\ud83c\udfa4"),a.createElement("button",{onClick:()=>{b(!0),N("video")}},"\ud83c\udfa5"),a.createElement("button",{onClick:async()=>{try{const e=await navigator.mediaDevices.getUserMedia({video:!0}),t=document.createElement("video");t.srcObject=e,await t.play();const a=document.createElement("canvas");a.width=t.videoWidth,a.height=t.videoHeight,a.getContext("2d")?.drawImage(t,0,0);const n=a.toDataURL("image/jpeg");if(e.getTracks().forEach((e=>e.stop())),s){const e={id:Date.now().toString(),senderId:0,type:"image",content:n,timestamp:new Date,isDeleted:!1};y(s.id,e)}}catch(e){console.error("Error taking photo:",e)}}},"\ud83d\udcf8")),p&&a.createElement("div",{className:"emoji-picker"},i.map((e=>a.createElement("button",{key:e,onClick:()=>(e=>{m((t=>t+e))})(e)},e)))),g&&a.createElement("div",{className:"sticker-picker"},c.map((e=>a.createElement("button",{key:e,onClick:()=>(e=>{if(!s)return;const t={id:Date.now().toString(),senderId:0,type:"sticker",content:e,timestamp:new Date,isDeleted:!1};y(s.id,t),w(!1)})(e)},a.createElement("img",{src:e,alt:"\u0421\u0442\u0438\u043a\u0435\u0440"}))))),a.createElement("input",{type:"text",value:o,onChange:e=>m(e.target.value),placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435...",onKeyPress:e=>"Enter"===e.key&&I()}),d?a.createElement("button",{className:"stop-recording",onClick:()=>{k.current&&D&&(k.current.stop(),D.getTracks().forEach((e=>e.stop())),h(null),l(!1),b(!1))}},"\u23f9\ufe0f \u041e\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u0437\u0430\u043f\u0438\u0441\u044c"):a.createElement("button",{onClick:I},"\u27a4"))):a.createElement("div",{className:"no-chat-selected"},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0447\u0430\u0442 \u0434\u043b\u044f \u043d\u0430\u0447\u0430\u043b\u0430 \u043e\u0431\u0449\u0435\u043d\u0438\u044f"))}}}]);
//# sourceMappingURL=361.53108001.chunk.js.map
{"ast":null,"code":"import React,{useState,useRef,useEffect}from'react';import'./ChatScreen.css';const initialChats=[{id:1,userId:1,userName:\"Анна\",userPhoto:\"https://images.unsplash.com/photo-1494790108377-be9c29b29330?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60\",lastActive:new Date(),isOnline:true,messages:[{id:'1',senderId:1,type:'text',content:'Привет! Как дела?',timestamp:new Date(Date.now()-3600000),isDeleted:false},{id:'2',senderId:0,type:'text',content:'Привет! Все отлично, спасибо! Как твои дела?',timestamp:new Date(Date.now()-3500000),isDeleted:false},{id:'3',senderId:1,type:'image',content:'https://images.unsplash.com/photo-1513379733131-48b424e4c267?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60',timestamp:new Date(Date.now()-3400000),isDeleted:false},{id:'4',senderId:0,type:'text',content:'Вау, отличное фото! Где это снято?',timestamp:new Date(Date.now()-3300000),isDeleted:false}]},{id:2,userId:2,userName:\"Мария\",userPhoto:\"https://images.unsplash.com/photo-1524638431109-93d95c968f03?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60\",lastActive:new Date(Date.now()-1800000),isOnline:false,messages:[{id:'5',senderId:2,type:'image',content:'https://images.unsplash.com/photo-1526080652727-5b77f74eacd2?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60',timestamp:new Date(Date.now()-7200000),isDeleted:false},{id:'6',senderId:0,type:'text',content:'Очень красиво! Ты профессиональный фотограф?',timestamp:new Date(Date.now()-7100000),isDeleted:false}]},{id:3,userId:3,userName:\"София\",userPhoto:\"https://images.unsplash.com/photo-1517841905240-472988babdf9?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60\",lastActive:new Date(),isOnline:true,messages:[{id:'7',senderId:3,type:'text',content:'Привет! Видел твой новый проект, очень впечатляет! 👏',timestamp:new Date(Date.now()-86400000),isDeleted:false},{id:'8',senderId:0,type:'text',content:'Спасибо большое! Я очень старался над ним 😊',timestamp:new Date(Date.now()-86300000),isDeleted:false}]},{id:4,userId:4,userName:\"Екатерина\",userPhoto:\"https://images.unsplash.com/photo-1488716820095-cbe80883c496?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60\",lastActive:new Date(Date.now()-3600000),isOnline:false,messages:[{id:'9',senderId:4,type:'text',content:'Готова к завтрашней встрече?',timestamp:new Date(Date.now()-172800000),isDeleted:false},{id:'10',senderId:0,type:'text',content:'Да, уже подготовила все материалы!',timestamp:new Date(Date.now()-172700000),isDeleted:false}]},{id:5,userId:5,userName:\"Алиса\",userPhoto:\"https://images.unsplash.com/photo-1534528741775-53994a69daeb?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60\",lastActive:new Date(),isOnline:true,messages:[{id:'11',senderId:5,type:'voice',content:'/audio/voice1.webm',timestamp:new Date(Date.now()-259200000),isDeleted:false},{id:'12',senderId:0,type:'text',content:'Извини, сейчас не могу прослушать, перезвоню позже!',timestamp:new Date(Date.now()-259100000),isDeleted:false}]},{id:6,userId:6,userName:\"Виктория\",userPhoto:\"https://images.unsplash.com/photo-1524504388940-b1c1722653e1?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60\",lastActive:new Date(Date.now()-7200000),isOnline:false,messages:[{id:'13',senderId:6,type:'video',content:'/video/video1.webm',timestamp:new Date(Date.now()-345600000),isDeleted:false},{id:'14',senderId:0,type:'text',content:'Классное видео! Обязательно посмотрю полностью вечером',timestamp:new Date(Date.now()-345500000),isDeleted:false}]},{id:7,userId:7,userName:\"Полина\",userPhoto:\"https://images.unsplash.com/photo-1529626455594-4ff0802cfb7e?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60\",lastActive:new Date(Date.now()-14400000),isOnline:false,messages:[{id:'15',senderId:7,type:'sticker',content:'/stickers/sticker1.png',timestamp:new Date(Date.now()-432000000),isDeleted:false},{id:'16',senderId:0,type:'sticker',content:'/stickers/sticker2.png',timestamp:new Date(Date.now()-431900000),isDeleted:false}]}];const emojis=['😊','😂','❤️','😍','👍','🎉','🌟','💕','🤔','😎','😌','🥰','😇','🤗','😋','😉','🙌','✨','🔥','💪'];const stickers=['/stickers/sticker1.png','/stickers/sticker2.png','/stickers/sticker3.png','/stickers/sticker4.png','/stickers/sticker5.png','/stickers/sticker6.png','/stickers/sticker7.png','/stickers/sticker8.png','/stickers/sticker9.png','/stickers/sticker10.png'];const ChatScreen=()=>{const[chats,setChats]=useState(initialChats);const[selectedChat,setSelectedChat]=useState(null);const[message,setMessage]=useState('');const[isRecording,setIsRecording]=useState(false);const[showEmojis,setShowEmojis]=useState(false);const[showStickers,setShowStickers]=useState(false);const[mediaStream,setMediaStream]=useState(null);const[isVideoMode,setIsVideoMode]=useState(false);const mediaRecorderRef=useRef(null);const audioChunksRef=useRef([]);const messageEndRef=useRef(null);useEffect(()=>{messageEndRef.current?.scrollIntoView({behavior:'smooth'});},[selectedChat?.messages]);const startRecording=async type=>{try{const stream=await navigator.mediaDevices.getUserMedia({audio:true,video:type==='video'});setMediaStream(stream);const mediaRecorder=new MediaRecorder(stream);mediaRecorderRef.current=mediaRecorder;audioChunksRef.current=[];mediaRecorder.ondataavailable=event=>{if(event.data.size>0){audioChunksRef.current.push(event.data);}};mediaRecorder.onstop=()=>{const audioBlob=new Blob(audioChunksRef.current,{type:type==='video'?'video/webm':'audio/webm'});const url=URL.createObjectURL(audioBlob);if(selectedChat){const newMessage={id:Date.now().toString(),senderId:0,type:type==='video'?'video':'voice',content:url,timestamp:new Date(),isDeleted:false};addMessage(selectedChat.id,newMessage);}};mediaRecorder.start();setIsRecording(true);}catch(error){console.error('Error accessing media devices:',error);}};const stopRecording=()=>{if(mediaRecorderRef.current&&mediaStream){mediaRecorderRef.current.stop();mediaStream.getTracks().forEach(track=>track.stop());setMediaStream(null);setIsRecording(false);setIsVideoMode(false);}};const takePhoto=async()=>{try{const stream=await navigator.mediaDevices.getUserMedia({video:true});const video=document.createElement('video');video.srcObject=stream;await video.play();const canvas=document.createElement('canvas');canvas.width=video.videoWidth;canvas.height=video.videoHeight;canvas.getContext('2d')?.drawImage(video,0,0);const photoUrl=canvas.toDataURL('image/jpeg');stream.getTracks().forEach(track=>track.stop());if(selectedChat){const newMessage={id:Date.now().toString(),senderId:0,type:'image',content:photoUrl,timestamp:new Date(),isDeleted:false};addMessage(selectedChat.id,newMessage);}}catch(error){console.error('Error taking photo:',error);}};const addMessage=(chatId,newMessage)=>{setChats(prevChats=>prevChats.map(chat=>chat.id===chatId?{...chat,messages:[...chat.messages,newMessage]}:chat));};const deleteMessage=(chatId,messageId)=>{setChats(prevChats=>prevChats.map(chat=>chat.id===chatId?{...chat,messages:chat.messages.map(msg=>msg.id===messageId?{...msg,isDeleted:true}:msg)}:chat));};const deleteChat=chatId=>{setChats(prevChats=>prevChats.filter(chat=>chat.id!==chatId));if(selectedChat?.id===chatId){setSelectedChat(null);}};const sendMessage=()=>{if(!message.trim()||!selectedChat)return;const newMessage={id:Date.now().toString(),senderId:0,type:'text',content:message.trim(),timestamp:new Date(),isDeleted:false};addMessage(selectedChat.id,newMessage);setMessage('');};const addEmoji=emoji=>{setMessage(prev=>prev+emoji);};const sendSticker=stickerUrl=>{if(!selectedChat)return;const newMessage={id:Date.now().toString(),senderId:0,type:'sticker',content:stickerUrl,timestamp:new Date(),isDeleted:false};addMessage(selectedChat.id,newMessage);setShowStickers(false);};const renderMessage=message=>{if(message.isDeleted){return/*#__PURE__*/React.createElement(\"div\",{className:\"deleted-message\"},\"\\u0421\\u043E\\u043E\\u0431\\u0449\\u0435\\u043D\\u0438\\u0435 \\u0443\\u0434\\u0430\\u043B\\u0435\\u043D\\u043E\");}switch(message.type){case'text':return/*#__PURE__*/React.createElement(\"div\",{className:\"message-text\"},message.content);case'voice':return/*#__PURE__*/React.createElement(\"audio\",{controls:true,className:\"voice-message\"},/*#__PURE__*/React.createElement(\"source\",{src:message.content,type:\"audio/webm\"}));case'video':return/*#__PURE__*/React.createElement(\"video\",{controls:true,className:\"video-message\"},/*#__PURE__*/React.createElement(\"source\",{src:message.content,type:\"video/webm\"}));case'image':return/*#__PURE__*/React.createElement(\"img\",{src:message.content,alt:\"\\u0424\\u043E\\u0442\\u043E\",className:\"image-message\"});case'sticker':return/*#__PURE__*/React.createElement(\"img\",{src:message.content,alt:\"\\u0421\\u0442\\u0438\\u043A\\u0435\\u0440\",className:\"sticker-message\"});default:return null;}};return/*#__PURE__*/React.createElement(\"div\",{className:\"chat-screen\"},/*#__PURE__*/React.createElement(\"div\",{className:\"chat-list\"},chats.map(chat=>/*#__PURE__*/React.createElement(\"div\",{key:chat.id,className:`chat-item ${selectedChat?.id===chat.id?'active':''}`,onClick:()=>setSelectedChat(chat)},/*#__PURE__*/React.createElement(\"div\",{className:\"chat-item-photo\"},/*#__PURE__*/React.createElement(\"img\",{src:chat.userPhoto,alt:chat.userName}),chat.isOnline&&/*#__PURE__*/React.createElement(\"div\",{className:\"online-indicator\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"chat-item-info\"},/*#__PURE__*/React.createElement(\"div\",{className:\"chat-item-name\"},chat.userName),/*#__PURE__*/React.createElement(\"div\",{className:\"chat-item-last-message\"},chat.messages[chat.messages.length-1]?.content)),/*#__PURE__*/React.createElement(\"button\",{className:\"delete-chat-button\",onClick:e=>{e.stopPropagation();deleteChat(chat.id);}},\"\\uD83D\\uDDD1\\uFE0F\")))),selectedChat?/*#__PURE__*/React.createElement(\"div\",{className:\"chat-content\"},/*#__PURE__*/React.createElement(\"div\",{className:\"chat-header\"},/*#__PURE__*/React.createElement(\"img\",{src:selectedChat.userPhoto,alt:selectedChat.userName}),/*#__PURE__*/React.createElement(\"div\",{className:\"chat-header-info\"},/*#__PURE__*/React.createElement(\"div\",{className:\"chat-header-name\"},selectedChat.userName),/*#__PURE__*/React.createElement(\"div\",{className:\"chat-header-status\"},selectedChat.isOnline?'В сети':'Был(а) в сети '+new Date(selectedChat.lastActive).toLocaleTimeString()))),/*#__PURE__*/React.createElement(\"div\",{className:\"messages-container\"},selectedChat.messages.map(message=>/*#__PURE__*/React.createElement(\"div\",{key:message.id,className:`message ${message.senderId===0?'sent':'received'}`},renderMessage(message),/*#__PURE__*/React.createElement(\"div\",{className:\"message-time\"},new Date(message.timestamp).toLocaleTimeString()),message.senderId===0&&!message.isDeleted&&/*#__PURE__*/React.createElement(\"button\",{className:\"delete-message-button\",onClick:()=>deleteMessage(selectedChat.id,message.id)},\"\\uD83D\\uDDD1\\uFE0F\"))),/*#__PURE__*/React.createElement(\"div\",{ref:messageEndRef})),/*#__PURE__*/React.createElement(\"div\",{className:\"chat-input\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-buttons\"},/*#__PURE__*/React.createElement(\"button\",{onClick:()=>setShowEmojis(!showEmojis)},\"\\uD83D\\uDE0A\"),/*#__PURE__*/React.createElement(\"button\",{onClick:()=>setShowStickers(!showStickers)},\"\\uD83C\\uDFAF\"),/*#__PURE__*/React.createElement(\"button\",{onClick:()=>startRecording('audio')},\"\\uD83C\\uDFA4\"),/*#__PURE__*/React.createElement(\"button\",{onClick:()=>{setIsVideoMode(true);startRecording('video');}},\"\\uD83C\\uDFA5\"),/*#__PURE__*/React.createElement(\"button\",{onClick:takePhoto},\"\\uD83D\\uDCF8\")),showEmojis&&/*#__PURE__*/React.createElement(\"div\",{className:\"emoji-picker\"},emojis.map(emoji=>/*#__PURE__*/React.createElement(\"button\",{key:emoji,onClick:()=>addEmoji(emoji)},emoji))),showStickers&&/*#__PURE__*/React.createElement(\"div\",{className:\"sticker-picker\"},stickers.map(sticker=>/*#__PURE__*/React.createElement(\"button\",{key:sticker,onClick:()=>sendSticker(sticker)},/*#__PURE__*/React.createElement(\"img\",{src:sticker,alt:\"\\u0421\\u0442\\u0438\\u043A\\u0435\\u0440\"})))),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",value:message,onChange:e=>setMessage(e.target.value),placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0441\\u043E\\u043E\\u0431\\u0449\\u0435\\u043D\\u0438\\u0435...\",onKeyPress:e=>e.key==='Enter'&&sendMessage()}),isRecording?/*#__PURE__*/React.createElement(\"button\",{className:\"stop-recording\",onClick:stopRecording},\"\\u23F9\\uFE0F \\u041E\\u0441\\u0442\\u0430\\u043D\\u043E\\u0432\\u0438\\u0442\\u044C \\u0437\\u0430\\u043F\\u0438\\u0441\\u044C\"):/*#__PURE__*/React.createElement(\"button\",{onClick:sendMessage},\"\\u27A4\"))):/*#__PURE__*/React.createElement(\"div\",{className:\"no-chat-selected\"},\"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0447\\u0430\\u0442 \\u0434\\u043B\\u044F \\u043D\\u0430\\u0447\\u0430\\u043B\\u0430 \\u043E\\u0431\\u0449\\u0435\\u043D\\u0438\\u044F\"));};export default ChatScreen;","map":{"version":3,"names":["React","useState","useRef","useEffect","initialChats","id","userId","userName","userPhoto","lastActive","Date","isOnline","messages","senderId","type","content","timestamp","now","isDeleted","emojis","stickers","ChatScreen","chats","setChats","selectedChat","setSelectedChat","message","setMessage","isRecording","setIsRecording","showEmojis","setShowEmojis","showStickers","setShowStickers","mediaStream","setMediaStream","isVideoMode","setIsVideoMode","mediaRecorderRef","audioChunksRef","messageEndRef","current","scrollIntoView","behavior","startRecording","stream","navigator","mediaDevices","getUserMedia","audio","video","mediaRecorder","MediaRecorder","ondataavailable","event","data","size","push","onstop","audioBlob","Blob","url","URL","createObjectURL","newMessage","toString","addMessage","start","error","console","stopRecording","stop","getTracks","forEach","track","takePhoto","document","createElement","srcObject","play","canvas","width","videoWidth","height","videoHeight","getContext","drawImage","photoUrl","toDataURL","chatId","prevChats","map","chat","deleteMessage","messageId","msg","deleteChat","filter","sendMessage","trim","addEmoji","emoji","prev","sendSticker","stickerUrl","renderMessage","className","controls","src","alt","key","onClick","length","e","stopPropagation","toLocaleTimeString","ref","sticker","value","onChange","target","placeholder","onKeyPress"],"sources":["C:/Users/Maks/Desktop/Amoo App/amoo-app/src/components/ChatScreen.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\r\nimport './ChatScreen.css';\r\n\r\ninterface Message {\r\n  id: string;\r\n  senderId: number;\r\n  type: 'text' | 'voice' | 'video' | 'image' | 'sticker' | 'story';\r\n  content: string;\r\n  timestamp: Date;\r\n  isDeleted: boolean;\r\n}\r\n\r\ninterface Chat {\r\n  id: number;\r\n  userId: number;\r\n  userName: string;\r\n  userPhoto: string;\r\n  lastActive: Date;\r\n  messages: Message[];\r\n  isOnline: boolean;\r\n}\r\n\r\nconst initialChats: Chat[] = [\r\n  {\r\n    id: 1,\r\n    userId: 1,\r\n    userName: \"Анна\",\r\n    userPhoto: \"https://images.unsplash.com/photo-1494790108377-be9c29b29330?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60\",\r\n    lastActive: new Date(),\r\n    isOnline: true,\r\n    messages: [\r\n      {\r\n        id: '1',\r\n        senderId: 1,\r\n        type: 'text',\r\n        content: 'Привет! Как дела?',\r\n        timestamp: new Date(Date.now() - 3600000),\r\n        isDeleted: false\r\n      },\r\n      {\r\n        id: '2',\r\n        senderId: 0,\r\n        type: 'text',\r\n        content: 'Привет! Все отлично, спасибо! Как твои дела?',\r\n        timestamp: new Date(Date.now() - 3500000),\r\n        isDeleted: false\r\n      },\r\n      {\r\n        id: '3',\r\n        senderId: 1,\r\n        type: 'image',\r\n        content: 'https://images.unsplash.com/photo-1513379733131-48b424e4c267?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60',\r\n        timestamp: new Date(Date.now() - 3400000),\r\n        isDeleted: false\r\n      },\r\n      {\r\n        id: '4',\r\n        senderId: 0,\r\n        type: 'text',\r\n        content: 'Вау, отличное фото! Где это снято?',\r\n        timestamp: new Date(Date.now() - 3300000),\r\n        isDeleted: false\r\n      }\r\n    ]\r\n  },\r\n  {\r\n    id: 2,\r\n    userId: 2,\r\n    userName: \"Мария\",\r\n    userPhoto: \"https://images.unsplash.com/photo-1524638431109-93d95c968f03?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60\",\r\n    lastActive: new Date(Date.now() - 1800000),\r\n    isOnline: false,\r\n    messages: [\r\n      {\r\n        id: '5',\r\n        senderId: 2,\r\n        type: 'image',\r\n        content: 'https://images.unsplash.com/photo-1526080652727-5b77f74eacd2?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60',\r\n        timestamp: new Date(Date.now() - 7200000),\r\n        isDeleted: false\r\n      },\r\n      {\r\n        id: '6',\r\n        senderId: 0,\r\n        type: 'text',\r\n        content: 'Очень красиво! Ты профессиональный фотограф?',\r\n        timestamp: new Date(Date.now() - 7100000),\r\n        isDeleted: false\r\n      }\r\n    ]\r\n  },\r\n  {\r\n    id: 3,\r\n    userId: 3,\r\n    userName: \"София\",\r\n    userPhoto: \"https://images.unsplash.com/photo-1517841905240-472988babdf9?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60\",\r\n    lastActive: new Date(),\r\n    isOnline: true,\r\n    messages: [\r\n      {\r\n        id: '7',\r\n        senderId: 3,\r\n        type: 'text',\r\n        content: 'Привет! Видел твой новый проект, очень впечатляет! 👏',\r\n        timestamp: new Date(Date.now() - 86400000),\r\n        isDeleted: false\r\n      },\r\n      {\r\n        id: '8',\r\n        senderId: 0,\r\n        type: 'text',\r\n        content: 'Спасибо большое! Я очень старался над ним 😊',\r\n        timestamp: new Date(Date.now() - 86300000),\r\n        isDeleted: false\r\n      }\r\n    ]\r\n  },\r\n  {\r\n    id: 4,\r\n    userId: 4,\r\n    userName: \"Екатерина\",\r\n    userPhoto: \"https://images.unsplash.com/photo-1488716820095-cbe80883c496?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60\",\r\n    lastActive: new Date(Date.now() - 3600000),\r\n    isOnline: false,\r\n    messages: [\r\n      {\r\n        id: '9',\r\n        senderId: 4,\r\n        type: 'text',\r\n        content: 'Готова к завтрашней встрече?',\r\n        timestamp: new Date(Date.now() - 172800000),\r\n        isDeleted: false\r\n      },\r\n      {\r\n        id: '10',\r\n        senderId: 0,\r\n        type: 'text',\r\n        content: 'Да, уже подготовила все материалы!',\r\n        timestamp: new Date(Date.now() - 172700000),\r\n        isDeleted: false\r\n      }\r\n    ]\r\n  },\r\n  {\r\n    id: 5,\r\n    userId: 5,\r\n    userName: \"Алиса\",\r\n    userPhoto: \"https://images.unsplash.com/photo-1534528741775-53994a69daeb?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60\",\r\n    lastActive: new Date(),\r\n    isOnline: true,\r\n    messages: [\r\n      {\r\n        id: '11',\r\n        senderId: 5,\r\n        type: 'voice',\r\n        content: '/audio/voice1.webm',\r\n        timestamp: new Date(Date.now() - 259200000),\r\n        isDeleted: false\r\n      },\r\n      {\r\n        id: '12',\r\n        senderId: 0,\r\n        type: 'text',\r\n        content: 'Извини, сейчас не могу прослушать, перезвоню позже!',\r\n        timestamp: new Date(Date.now() - 259100000),\r\n        isDeleted: false\r\n      }\r\n    ]\r\n  },\r\n  {\r\n    id: 6,\r\n    userId: 6,\r\n    userName: \"Виктория\",\r\n    userPhoto: \"https://images.unsplash.com/photo-1524504388940-b1c1722653e1?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60\",\r\n    lastActive: new Date(Date.now() - 7200000),\r\n    isOnline: false,\r\n    messages: [\r\n      {\r\n        id: '13',\r\n        senderId: 6,\r\n        type: 'video',\r\n        content: '/video/video1.webm',\r\n        timestamp: new Date(Date.now() - 345600000),\r\n        isDeleted: false\r\n      },\r\n      {\r\n        id: '14',\r\n        senderId: 0,\r\n        type: 'text',\r\n        content: 'Классное видео! Обязательно посмотрю полностью вечером',\r\n        timestamp: new Date(Date.now() - 345500000),\r\n        isDeleted: false\r\n      }\r\n    ]\r\n  },\r\n  {\r\n    id: 7,\r\n    userId: 7,\r\n    userName: \"Полина\",\r\n    userPhoto: \"https://images.unsplash.com/photo-1529626455594-4ff0802cfb7e?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60\",\r\n    lastActive: new Date(Date.now() - 14400000),\r\n    isOnline: false,\r\n    messages: [\r\n      {\r\n        id: '15',\r\n        senderId: 7,\r\n        type: 'sticker',\r\n        content: '/stickers/sticker1.png',\r\n        timestamp: new Date(Date.now() - 432000000),\r\n        isDeleted: false\r\n      },\r\n      {\r\n        id: '16',\r\n        senderId: 0,\r\n        type: 'sticker',\r\n        content: '/stickers/sticker2.png',\r\n        timestamp: new Date(Date.now() - 431900000),\r\n        isDeleted: false\r\n      }\r\n    ]\r\n  }\r\n];\r\n\r\nconst emojis = ['😊', '😂', '❤️', '😍', '👍', '🎉', '🌟', '💕', '🤔', '😎', '😌', '🥰', '😇', '🤗', '😋', '😉', '🙌', '✨', '🔥', '💪'];\r\nconst stickers = [\r\n  '/stickers/sticker1.png',\r\n  '/stickers/sticker2.png',\r\n  '/stickers/sticker3.png',\r\n  '/stickers/sticker4.png',\r\n  '/stickers/sticker5.png',\r\n  '/stickers/sticker6.png',\r\n  '/stickers/sticker7.png',\r\n  '/stickers/sticker8.png',\r\n  '/stickers/sticker9.png',\r\n  '/stickers/sticker10.png'\r\n];\r\n\r\nconst ChatScreen: React.FC = () => {\r\n  const [chats, setChats] = useState<Chat[]>(initialChats);\r\n  const [selectedChat, setSelectedChat] = useState<Chat | null>(null);\r\n  const [message, setMessage] = useState('');\r\n  const [isRecording, setIsRecording] = useState(false);\r\n  const [showEmojis, setShowEmojis] = useState(false);\r\n  const [showStickers, setShowStickers] = useState(false);\r\n  const [mediaStream, setMediaStream] = useState<MediaStream | null>(null);\r\n  const [isVideoMode, setIsVideoMode] = useState(false);\r\n\r\n  const mediaRecorderRef = useRef<MediaRecorder | null>(null);\r\n  const audioChunksRef = useRef<Blob[]>([]);\r\n  const messageEndRef = useRef<HTMLDivElement>(null);\r\n\r\n  useEffect(() => {\r\n    messageEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n  }, [selectedChat?.messages]);\r\n\r\n  const startRecording = async (type: 'audio' | 'video') => {\r\n    try {\r\n      const stream = await navigator.mediaDevices.getUserMedia({\r\n        audio: true,\r\n        video: type === 'video'\r\n      });\r\n      \r\n      setMediaStream(stream);\r\n      const mediaRecorder = new MediaRecorder(stream);\r\n      mediaRecorderRef.current = mediaRecorder;\r\n      audioChunksRef.current = [];\r\n\r\n      mediaRecorder.ondataavailable = (event) => {\r\n        if (event.data.size > 0) {\r\n          audioChunksRef.current.push(event.data);\r\n        }\r\n      };\r\n\r\n      mediaRecorder.onstop = () => {\r\n        const audioBlob = new Blob(audioChunksRef.current, {\r\n          type: type === 'video' ? 'video/webm' : 'audio/webm'\r\n        });\r\n        const url = URL.createObjectURL(audioBlob);\r\n        \r\n        if (selectedChat) {\r\n          const newMessage: Message = {\r\n            id: Date.now().toString(),\r\n            senderId: 0,\r\n            type: type === 'video' ? 'video' : 'voice',\r\n            content: url,\r\n            timestamp: new Date(),\r\n            isDeleted: false\r\n          };\r\n          \r\n          addMessage(selectedChat.id, newMessage);\r\n        }\r\n      };\r\n\r\n      mediaRecorder.start();\r\n      setIsRecording(true);\r\n    } catch (error) {\r\n      console.error('Error accessing media devices:', error);\r\n    }\r\n  };\r\n\r\n  const stopRecording = () => {\r\n    if (mediaRecorderRef.current && mediaStream) {\r\n      mediaRecorderRef.current.stop();\r\n      mediaStream.getTracks().forEach(track => track.stop());\r\n      setMediaStream(null);\r\n      setIsRecording(false);\r\n      setIsVideoMode(false);\r\n    }\r\n  };\r\n\r\n  const takePhoto = async () => {\r\n    try {\r\n      const stream = await navigator.mediaDevices.getUserMedia({ video: true });\r\n      const video = document.createElement('video');\r\n      video.srcObject = stream;\r\n      await video.play();\r\n\r\n      const canvas = document.createElement('canvas');\r\n      canvas.width = video.videoWidth;\r\n      canvas.height = video.videoHeight;\r\n      canvas.getContext('2d')?.drawImage(video, 0, 0);\r\n\r\n      const photoUrl = canvas.toDataURL('image/jpeg');\r\n      stream.getTracks().forEach(track => track.stop());\r\n\r\n      if (selectedChat) {\r\n        const newMessage: Message = {\r\n          id: Date.now().toString(),\r\n          senderId: 0,\r\n          type: 'image',\r\n          content: photoUrl,\r\n          timestamp: new Date(),\r\n          isDeleted: false\r\n        };\r\n        \r\n        addMessage(selectedChat.id, newMessage);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error taking photo:', error);\r\n    }\r\n  };\r\n\r\n  const addMessage = (chatId: number, newMessage: Message) => {\r\n    setChats(prevChats => \r\n      prevChats.map(chat => \r\n        chat.id === chatId\r\n          ? { ...chat, messages: [...chat.messages, newMessage] }\r\n          : chat\r\n      )\r\n    );\r\n  };\r\n\r\n  const deleteMessage = (chatId: number, messageId: string) => {\r\n    setChats(prevChats =>\r\n      prevChats.map(chat =>\r\n        chat.id === chatId\r\n          ? {\r\n              ...chat,\r\n              messages: chat.messages.map(msg =>\r\n                msg.id === messageId\r\n                  ? { ...msg, isDeleted: true }\r\n                  : msg\r\n              )\r\n            }\r\n          : chat\r\n      )\r\n    );\r\n  };\r\n\r\n  const deleteChat = (chatId: number) => {\r\n    setChats(prevChats => prevChats.filter(chat => chat.id !== chatId));\r\n    if (selectedChat?.id === chatId) {\r\n      setSelectedChat(null);\r\n    }\r\n  };\r\n\r\n  const sendMessage = () => {\r\n    if (!message.trim() || !selectedChat) return;\r\n\r\n    const newMessage: Message = {\r\n      id: Date.now().toString(),\r\n      senderId: 0,\r\n      type: 'text',\r\n      content: message.trim(),\r\n      timestamp: new Date(),\r\n      isDeleted: false\r\n    };\r\n\r\n    addMessage(selectedChat.id, newMessage);\r\n    setMessage('');\r\n  };\r\n\r\n  const addEmoji = (emoji: string) => {\r\n    setMessage(prev => prev + emoji);\r\n  };\r\n\r\n  const sendSticker = (stickerUrl: string) => {\r\n    if (!selectedChat) return;\r\n\r\n    const newMessage: Message = {\r\n      id: Date.now().toString(),\r\n      senderId: 0,\r\n      type: 'sticker',\r\n      content: stickerUrl,\r\n      timestamp: new Date(),\r\n      isDeleted: false\r\n    };\r\n\r\n    addMessage(selectedChat.id, newMessage);\r\n    setShowStickers(false);\r\n  };\r\n\r\n  const renderMessage = (message: Message) => {\r\n    if (message.isDeleted) {\r\n      return <div className=\"deleted-message\">Сообщение удалено</div>;\r\n    }\r\n\r\n    switch (message.type) {\r\n      case 'text':\r\n        return <div className=\"message-text\">{message.content}</div>;\r\n      case 'voice':\r\n        return (\r\n          <audio controls className=\"voice-message\">\r\n            <source src={message.content} type=\"audio/webm\" />\r\n          </audio>\r\n        );\r\n      case 'video':\r\n        return (\r\n          <video controls className=\"video-message\">\r\n            <source src={message.content} type=\"video/webm\" />\r\n          </video>\r\n        );\r\n      case 'image':\r\n        return <img src={message.content} alt=\"Фото\" className=\"image-message\" />;\r\n      case 'sticker':\r\n        return <img src={message.content} alt=\"Стикер\" className=\"sticker-message\" />;\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"chat-screen\">\r\n      <div className=\"chat-list\">\r\n        {chats.map(chat => (\r\n          <div\r\n            key={chat.id}\r\n            className={`chat-item ${selectedChat?.id === chat.id ? 'active' : ''}`}\r\n            onClick={() => setSelectedChat(chat)}\r\n          >\r\n            <div className=\"chat-item-photo\">\r\n              <img src={chat.userPhoto} alt={chat.userName} />\r\n              {chat.isOnline && <div className=\"online-indicator\" />}\r\n            </div>\r\n            <div className=\"chat-item-info\">\r\n              <div className=\"chat-item-name\">{chat.userName}</div>\r\n              <div className=\"chat-item-last-message\">\r\n                {chat.messages[chat.messages.length - 1]?.content}\r\n              </div>\r\n            </div>\r\n            <button\r\n              className=\"delete-chat-button\"\r\n              onClick={(e) => {\r\n                e.stopPropagation();\r\n                deleteChat(chat.id);\r\n              }}\r\n            >\r\n              🗑️\r\n            </button>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {selectedChat ? (\r\n        <div className=\"chat-content\">\r\n          <div className=\"chat-header\">\r\n            <img src={selectedChat.userPhoto} alt={selectedChat.userName} />\r\n            <div className=\"chat-header-info\">\r\n              <div className=\"chat-header-name\">{selectedChat.userName}</div>\r\n              <div className=\"chat-header-status\">\r\n                {selectedChat.isOnline ? 'В сети' : 'Был(а) в сети ' + new Date(selectedChat.lastActive).toLocaleTimeString()}\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"messages-container\">\r\n            {selectedChat.messages.map(message => (\r\n              <div\r\n                key={message.id}\r\n                className={`message ${message.senderId === 0 ? 'sent' : 'received'}`}\r\n              >\r\n                {renderMessage(message)}\r\n                <div className=\"message-time\">\r\n                  {new Date(message.timestamp).toLocaleTimeString()}\r\n                </div>\r\n                {message.senderId === 0 && !message.isDeleted && (\r\n                  <button\r\n                    className=\"delete-message-button\"\r\n                    onClick={() => deleteMessage(selectedChat.id, message.id)}\r\n                  >\r\n                    🗑️\r\n                  </button>\r\n                )}\r\n              </div>\r\n            ))}\r\n            <div ref={messageEndRef} />\r\n          </div>\r\n\r\n          <div className=\"chat-input\">\r\n            <div className=\"input-buttons\">\r\n              <button onClick={() => setShowEmojis(!showEmojis)}>😊</button>\r\n              <button onClick={() => setShowStickers(!showStickers)}>🎯</button>\r\n              <button onClick={() => startRecording('audio')}>🎤</button>\r\n              <button onClick={() => {\r\n                setIsVideoMode(true);\r\n                startRecording('video');\r\n              }}>🎥</button>\r\n              <button onClick={takePhoto}>📸</button>\r\n            </div>\r\n\r\n            {showEmojis && (\r\n              <div className=\"emoji-picker\">\r\n                {emojis.map(emoji => (\r\n                  <button key={emoji} onClick={() => addEmoji(emoji)}>\r\n                    {emoji}\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            )}\r\n\r\n            {showStickers && (\r\n              <div className=\"sticker-picker\">\r\n                {stickers.map(sticker => (\r\n                  <button key={sticker} onClick={() => sendSticker(sticker)}>\r\n                    <img src={sticker} alt=\"Стикер\" />\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            )}\r\n\r\n            <input\r\n              type=\"text\"\r\n              value={message}\r\n              onChange={(e) => setMessage(e.target.value)}\r\n              placeholder=\"Введите сообщение...\"\r\n              onKeyPress={(e) => e.key === 'Enter' && sendMessage()}\r\n            />\r\n\r\n            {isRecording ? (\r\n              <button className=\"stop-recording\" onClick={stopRecording}>\r\n                ⏹️ Остановить запись\r\n              </button>\r\n            ) : (\r\n              <button onClick={sendMessage}>➤</button>\r\n            )}\r\n          </div>\r\n        </div>\r\n      ) : (\r\n        <div className=\"no-chat-selected\">\r\n          Выберите чат для начала общения\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChatScreen; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
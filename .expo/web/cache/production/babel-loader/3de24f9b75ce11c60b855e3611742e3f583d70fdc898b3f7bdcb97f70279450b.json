{"ast":null,"code":"import React,{useEffect,useState}from'react';import datingService from'../services/datingService';import ProfilePhotos from'./ProfilePhotos';import ProfileInfo from'./ProfileInfo';import MatchesList from'./MatchesList';import'./DatingScreen.css';const DatingScreen=()=>{const[currentProfile,setCurrentProfile]=useState(null);const[matches,setMatches]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{loadData();},[]);const loadData=async()=>{try{setLoading(true);setError(null);const[profileResponse,matchesResponse]=await Promise.all([datingService.getPotentialMatches(),datingService.getMatches()]);if(profileResponse.length>0){setCurrentProfile(profileResponse[0]);}setMatches(matchesResponse);}catch(err){setError('Произошла ошибка при загрузке данных');console.error(err);}finally{setLoading(false);}};const handleLike=async()=>{if(!currentProfile)return;try{await datingService.likeProfile(currentProfile.id);loadData();// Перезагружаем данные после лайка\n}catch(err){setError('Не удалось поставить лайк');console.error(err);}};const handleDislike=async()=>{if(!currentProfile)return;try{await datingService.dislikeProfile(currentProfile.id);loadData();// Перезагружаем данные после дизлайка\n}catch(err){setError('Не удалось поставить дизлайк');console.error(err);}};const handleMatchClick=async matchId=>{try{await datingService.acceptMatch(matchId);loadData();// Перезагружаем данные после принятия совпадения\n}catch(err){setError('Не удалось принять совпадение');console.error(err);}};if(loading){return/*#__PURE__*/React.createElement(\"div\",{className:\"loading\"},\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430...\");}if(error){return/*#__PURE__*/React.createElement(\"div\",{className:\"error\"},error);}if(!currentProfile){return/*#__PURE__*/React.createElement(\"div\",{className:\"no-matches\"},/*#__PURE__*/React.createElement(\"h2\",null,\"\\u041D\\u0435\\u0442 \\u0434\\u043E\\u0441\\u0442\\u0443\\u043F\\u043D\\u044B\\u0445 \\u043F\\u0440\\u043E\\u0444\\u0438\\u043B\\u0435\\u0439\"),/*#__PURE__*/React.createElement(\"p\",null,\"\\u041F\\u043E\\u043F\\u0440\\u043E\\u0431\\u0443\\u0439\\u0442\\u0435 \\u0438\\u0437\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C \\u043D\\u0430\\u0441\\u0442\\u0440\\u043E\\u0439\\u043A\\u0438 \\u043F\\u043E\\u0438\\u0441\\u043A\\u0430 \\u0438\\u043B\\u0438 \\u0432\\u0435\\u0440\\u043D\\u0438\\u0442\\u0435\\u0441\\u044C \\u043F\\u043E\\u0437\\u0436\\u0435\"));}return/*#__PURE__*/React.createElement(\"div\",{className:\"dating-screen\"},/*#__PURE__*/React.createElement(\"div\",{className:\"profile-card\"},/*#__PURE__*/React.createElement(ProfilePhotos,{photos:currentProfile.photos}),/*#__PURE__*/React.createElement(ProfileInfo,{profile:currentProfile,onLike:handleLike,onDislike:handleDislike})),/*#__PURE__*/React.createElement(MatchesList,{matches:matches,onMatchClick:handleMatchClick}));};export default DatingScreen;","map":{"version":3,"names":["React","useEffect","useState","datingService","ProfilePhotos","ProfileInfo","MatchesList","DatingScreen","currentProfile","setCurrentProfile","matches","setMatches","loading","setLoading","error","setError","loadData","profileResponse","matchesResponse","Promise","all","getPotentialMatches","getMatches","length","err","console","handleLike","likeProfile","id","handleDislike","dislikeProfile","handleMatchClick","matchId","acceptMatch","createElement","className","photos","profile","onLike","onDislike","onMatchClick"],"sources":["C:/Users/Maks/Desktop/Amoo App/amoo-app/src/components/DatingScreen.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { DatingProfile, Match } from '../services/datingService';\r\nimport datingService from '../services/datingService';\r\nimport ProfilePhotos from './ProfilePhotos';\r\nimport ProfileInfo from './ProfileInfo';\r\nimport MatchesList from './MatchesList';\r\nimport './DatingScreen.css';\r\n\r\nconst DatingScreen: React.FC = () => {\r\n  const [currentProfile, setCurrentProfile] = useState<DatingProfile | null>(null);\r\n  const [matches, setMatches] = useState<Match[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    loadData();\r\n  }, []);\r\n\r\n  const loadData = async () => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      const [profileResponse, matchesResponse] = await Promise.all([\r\n        datingService.getPotentialMatches(),\r\n        datingService.getMatches()\r\n      ]);\r\n      \r\n      if (profileResponse.length > 0) {\r\n        setCurrentProfile(profileResponse[0]);\r\n      }\r\n      setMatches(matchesResponse);\r\n    } catch (err) {\r\n      setError('Произошла ошибка при загрузке данных');\r\n      console.error(err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleLike = async () => {\r\n    if (!currentProfile) return;\r\n    \r\n    try {\r\n      await datingService.likeProfile(currentProfile.id);\r\n      loadData(); // Перезагружаем данные после лайка\r\n    } catch (err) {\r\n      setError('Не удалось поставить лайк');\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  const handleDislike = async () => {\r\n    if (!currentProfile) return;\r\n    \r\n    try {\r\n      await datingService.dislikeProfile(currentProfile.id);\r\n      loadData(); // Перезагружаем данные после дизлайка\r\n    } catch (err) {\r\n      setError('Не удалось поставить дизлайк');\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  const handleMatchClick = async (matchId: string) => {\r\n    try {\r\n      await datingService.acceptMatch(matchId);\r\n      loadData(); // Перезагружаем данные после принятия совпадения\r\n    } catch (err) {\r\n      setError('Не удалось принять совпадение');\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return <div className=\"loading\">Загрузка...</div>;\r\n  }\r\n\r\n  if (error) {\r\n    return <div className=\"error\">{error}</div>;\r\n  }\r\n\r\n  if (!currentProfile) {\r\n    return (\r\n      <div className=\"no-matches\">\r\n        <h2>Нет доступных профилей</h2>\r\n        <p>Попробуйте изменить настройки поиска или вернитесь позже</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"dating-screen\">\r\n      <div className=\"profile-card\">\r\n        <ProfilePhotos photos={currentProfile.photos} />\r\n        <ProfileInfo\r\n          profile={currentProfile}\r\n          onLike={handleLike}\r\n          onDislike={handleDislike}\r\n        />\r\n      </div>\r\n      <MatchesList matches={matches} onMatchClick={handleMatchClick} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DatingScreen; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}